<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.weichai.modules.filegen.dao.InOutUsedDao">
	<sql id="inOutUsedColumns">
		a.ID as id,
		a.CONTENT as content,
		a.ENCODES as encodes,
		a.SUPPLIER_TYPE as supplierType,
		a.FILE_PATH as filePath,
		a.CREATE_BY as createBy,
		a.CREATE_DATE as createDate,
		a.UPDATE_BY as updateBy,
		a.UPDATE_DATE as updateDate,
		a.REMARKS as remarks,
		a.STATUS as status
	</sql>


	<insert id="insertInOutUsed" parameterType="InOutUsed">
		INSERT INTO IN_OUT_USED(
			ID,
			CONTENT,
			ENCODES,
			SUPPLIER_TYPE,
			FILE_PATH,
			FILE_NAME,
			CREATE_BY,
			CREATE_DATE,
			UPDATE_BY,
			UPDATE_DATE,
			REMARKS,
			STATUS
		)VALUES (
			#{id},
			#{content},
			#{encodes},
			#{supplierType},
			#{filePath},
			#{fileName},
			#{createBy},
			#{createDate},
			#{updateBy},
			#{updateDate},
			#{remarks},
			#{status}
		)
	</insert>

	<select id="selectInOutUsedCount" parameterType="InOutUsed" resultType="InOutUsed">
		SELECT
		SUPPLIER_TYPE AS supplierType,
		COUNT (1) AS countBatch
		FROM IN_OUT_USED
		<where>
			<if test="supplierType!=null and supplierType!=''">
				SUPPLIER_TYPE = #{supplierType}
			</if>
			<if test="startTime !=null">
				<![CDATA[  AND  trunc(CREATE_DATE) >= #{startTime}  ]]>
			</if>
			<if test="endTime !=null">
				<![CDATA[  AND  trunc(CREATE_DATE) <= #{endTime}  ]]>
			</if>
		</where>
		GROUP BY SUPPLIER_TYPE
	</select>
</mapper>

