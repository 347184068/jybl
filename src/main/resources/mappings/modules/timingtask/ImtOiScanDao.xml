<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.weichai.modules.timingtask.dao.ImtOiScanDao">

	<select id="selectImtOiScanList" resultType="ImtOiScan">
		SELECT
			a.ID AS id,
			a.PURCHASE_ORDER AS purchaseOrder,
			a.SHIPPING_ORDER AS shippingOrder,
			a.CUSTOMER_CODE AS customerCode,
			a.CUSTOMER_NAME AS customerName,
			a.SUPPLIER_NAME AS supplierName,
			a.RECEIVE_NAME AS receiveName,
			a.MATERIAL_CODE AS materialCode,
			a.MATERIAL_NAME AS materialName,
			a.PRODUCT_ID AS productId,
			a.SECURITY AS security,
			a.W_ID AS outCode,
			a.SHIPPING_TIME AS shippingTime,
			a.IMT_TIME AS imtTime,
			a.IMT_STATUS AS imtStatus,
			a.PRODUCT_ID_NUM as productIdNum,
			a.W_ID_NUM as wIdNum,
			a.SECURITY_NUM as securityNum,
			b.N_ID AS inCode,
			b.BAOCAI_TYPE as baoCaiType
		 FROM IMT_OI_SCAN a LEFT JOIN IN_OUT_DETAIL b
		 ON a.W_ID = b.W_ID
		 WHERE a.IMT_STATUS = 0
	</select>

	<update id="updateImtOiScanImtStatus" parameterType="java.util.List">
		BEGIN
		<foreach collection="list" item="item" index="index"  separator=";">
			update IMT_OI_SCAN
			<set>
				IMT_STATUS = 1
			</set>
			where ID = ${item.id}
		</foreach>
		;END ;
	</update>

</mapper>

